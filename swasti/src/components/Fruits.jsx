import React, { useEffect, useState } from 'react'
import AddFruitForm from '../components/AddFruitForm';
import api from "../api";

const Fruits = () =>{
    const [fruits,setFruits] = useState([]);
    const fetchFruits = async ()=>{
        try{
            const response = await api.get("/fruits");
            setFruits(response.data.fruits);
        }catch(error){
            console.error("Error fetching fruits",error);
        }
    };

    const addFruit = async(fruitName)=>{
        try{
            await api.post("/fruits",{name:fruitName});
            fetchFruits();
        }catch(error){
            console.error("error adding fruit",error);
        }
    };

    useEffect(()=>{
        fetchFruits();
    },[]);

  return (
    <div>
        <h2>Fruits List</h2>
        <ul>
            {fruits.map((fruit,index)=>(
                <li key={index}>{fruit.name}</li>
            ))}
        </ul>
        <AddFruitForm addFruit={addFruit} />
    </div>
  )
}

export default Fruits